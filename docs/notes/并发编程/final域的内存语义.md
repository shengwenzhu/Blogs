# final 域的内存语义

对于 final 域，编译器和处理器要遵守两个重排序规则：

+ 写 final 域的重排序规则：

  JMM 禁止编译器把 final 域的写 重排序到构造函数之外；（可以保证对象引用在任意线程可见之前，final 域已完成初始化）（编译器通过在 final 域写之后，构造函数 return 之前插入一个 StoreStore 屏障实现）

+ 读 final 域的重排序规则：

  初次读对象引用和初次读该对象包含的 final 域，JMM 禁止处理器重排序这两个操作；（可以保证读取到对象初始化后的 final 域）（编译器在读 final 域的操作前插入 LoadLoad 屏障实现）

